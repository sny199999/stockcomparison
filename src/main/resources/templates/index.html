<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="layui/css/layui.css" media="all">
</head>
<body>
<div style="width: 90%;margin: auto">
    <div class="demoTable">
        搜所股票代碼：
        <div class="layui-inline">
            <input class="layui-input" name="id" id="demoReload" autocomplete="off">
        </div>
        <button class="layui-btn" data-type="reload">搜索</button>
    </div>
    <table class="layui-hide" id="test" lay-filter="test" ></table>
</div>

</body>
<script src="layui/layui.js" type="text/javascript"></script>
<script src="static/js/jquery-2.0.3.min.js" type="text/javascript" ></script>
<script>
    var $;
    var layer;
    var table;
    layui.use('table', function() {
        table = layui.table,$ = layui.$;
        layer =layui.layer;

        table.render({
            elem: '#test'
            , url: '/indexlook'
            ,done :doneRefresh
            , cols: [
                [
                    {field:'Code', title: '股票代码', sort: true,event:'urq'}
                    ,{field:'name', title: '股票名称'} //width 支持：数字、百分比和不填写。你还可以通过 minWidth 参数局部定义当前单元格的最小宽度，layui 2.2.1 新增
                    ,{field:'latest_price', title: '最新价', sort: true, align: 'center'}
                    ,{field:'up_and_down', title: '涨跌幅%', sort: true, align: 'center'}
                    ,{field:'up_and_down_amount', title: '涨跌金额', sort: true, align: 'center'}
                    ,{field:'volume', title: '成交量(手)', align: 'center', sort: true} //单元格内容水平居中
                    ,{field:'turnover', title: '成交金额', sort: true, align: 'center'} //单元格内容水平居中
                    ,{field:'amplitude', title: '振幅', sort: true, align: 'center'}
                    ,{field:'highest', title: '最高', sort: true, align: 'center'}
                    ,{field:'minnimum', title: '最低', sort: true, align: 'center'}
                    ,{field:'today_opens', title: '今开', sort: true, align: 'center'}
                    ,{field:'yesterdays_harvest', title: '昨收', sort: true, align: 'center'}
                    ,{field:'volume_ratio', title: '量比', sort: true, align: 'center'}
                    ,{field:'turnover_rate', title: '换手率%', sort: true, align: 'center'}
                    ,{field:'net_market_rate', title: '市净率', sort: true, align: 'center'}
                    ,{field:'TotalMarketValue', title: '总市值', sort: true, align: 'center'}
                    ,{field:'MarketValueofCirculation', title: '流通市值', sort: true, align: 'center'}
                    ,{field:'dayriseandfall', title: '60日涨跌幅', sort: true, align: 'center'}
                    ,{field:'date', title: '日期', sort: true}
                ]
            ]
            , page: true
            ,id: 'testReload'
        });

    var $ = layui.$, active = {
        reload: function(){
            var demoReload = $('#demoReload').val();
            //执行重载
            table.reload('testReload', {
                page: {
                    curr: 1 //重新从第 1 页开始
                }
                ,where: {
                        code: demoReload
                }
            }, 'data');
        }
    };
        //监听行单击事件（单击事件为：rowDouble）
        table.on('tool(test)', function(obj){
            if(obj.event === 'urq') {
                alert(111111)
            }
        })

    $('.demoTable .layui-btn').on('click', function(){
        var type = $(this).data('type');
        active[type] ? active[type].call(this) : '';
    });

    //自动渲染绑定按钮
    function doneRefresh(){
    }
})
</script>
</html>